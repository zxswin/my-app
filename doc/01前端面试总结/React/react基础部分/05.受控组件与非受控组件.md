## 受控组件与非受控组件

- 完全受控组件

```tsx
/** 只使用props  */
function EmailInput(props) {
  return <input onChange={props.onChange} value={props.email} />;
}
```

- 有 key 的非可控组件

```tsx
/**
 * key 这个特殊的 React 属性。当 key 变化时， React 会创建一个新的而不是更新一个既有的组件。
 */

<EmailInput defaultEmail={this.props.user.email} key={this.props.user.id} />
```

## 受控组件与非受控组件的区别

```js
// 受控组件
<Input value={x} onChange={fn}/>

// 非受控组件
<Input defaultValue={x} ref={input}/>
```

- 这是一个受控组件

```js
class NameForm extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      username: 'BOb',
    };
  }
  onChange(e) {
    console.log(e.target.value);
    this.setState({
      username: e.target.value,
    });
  }
  render() {
    return (
      <input
        name="username"
        value={this.state.username}
        onChange={(e) => this.onChange(e)}
      />
    );
  }
}
```

- 这是一个非受控组件：

```js
export class NameForm extends Component {
  constructor(props) {
    super(props);
    this.inputRef = React.createRef();
  }
  handleSubmit = (e) => {
    console.log('我们可以获得input内的值为', this.inputRef.current.value);
    e.preventDefault();
  };
  render() {
    return (
      <form onSubmit={(e) => this.handleSubmit(e)}>
        <input defaultValue="lindaidai" ref={this.inputRef} />
        <input type="submit" value="提交" />
      </form>
    );
  }
}
```
