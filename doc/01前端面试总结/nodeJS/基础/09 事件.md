## 事件

- EventEmitter 类

```ts
/**
 * events 模块只提供了一个对象： events.EventEmitter。
 * EventEmitter 的核心就是事件触发与事件监听器功能的封装
 * 大多数时候我们不会直接使用 EventEmitter，而是在对象中继承它。
 * 包括 fs、net、 http 在内的，只要是支持事件响应的核心模块都是 EventEmitter 的子类。
 */
```

- 通过引入 events 模块，并通过实例化 EventEmitter 类来绑定和监听事件

```ts
// 引入 events 模块
var events = require('events');
// 创建 eventEmitter 对象
var eventEmitter = new events.EventEmitter();

// 创建事件处理程序
var connectHandler = function connected() {
  console.log('连接成功。');

  // 触发 data_received 事件
  eventEmitter.emit('data_received');
};

// 绑定 connection 事件处理程序
eventEmitter.on('connection', connectHandler);

// 使用匿名函数绑定 data_received 事件
eventEmitter.on('data_received', function () {
  console.log('数据接收成功。');
});

// 触发 connection 事件
eventEmitter.emit('connection');

console.log('程序执行完毕。');
```

- 当事件触发时，注册到这个事件的事件监听器被依次调用，事件参数作为回调函数参数传递。

```ts
//event.js 文件
var events = require('events');
var emitter = new events.EventEmitter();
emitter.on('someEvent', function (arg1, arg2) {
  console.log('listener1', arg1, arg2);
});
emitter.on('someEvent', function (arg1, arg2) {
  console.log('listener2', arg1, arg2);
});
emitter.emit('someEvent', 'arg1 参数', 'arg2 参数');
```
