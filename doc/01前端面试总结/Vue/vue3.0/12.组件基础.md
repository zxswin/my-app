## 一个简单的 Vue 组件的示例

```html
<div id="components-demo">
  <button-counter></button-counter>
</div>
```

```js
// 创建一个Vue 应用
const app = Vue.createApp({});

// 组件是可复用的实例，所以它们与根实例接收相同的选项，例如 data、computed、watch、methods 以及生命周期钩子等。
// 定义一个名为 button-counter 的新全局组件
app.component('button-counter', {
  data() {
    return {
      count: 0,
    };
  },
  template: `
    <button @click="count++">
      You clicked me {{ count }} times.
    </button>`,
});

app.mount('#components-demo');
```

## 通过 Prop 向子组件传递数据

```html
<div id="blog-posts-demo">
  <blog-post
    v-for="post in posts"
    :key="post.id"
    :title="post.title"
  ></blog-post>
</div>
```

```js
const App = {
  data() {
    return {
      posts: [
        { id: 1, title: 'My journey with Vue' },
        { id: 2, title: 'Blogging with Vue' },
        { id: 3, title: 'Why Vue is so fun' },
      ],
    };
  },
};

const app = Vue.createApp(App);

app.component('blog-post', {
  props: ['title'],
  template: `<h4>{{ title }}</h4>`,
});

app.mount('#blog-posts-demo');
```

## 监听子组件事件

```html
<div id="blog-posts-events-demo" class="demo">
  <div :style="{ fontSize: postFontSize + 'em' }">
    <blog-post
      v-for="post in posts"
      :key="post.id"
      :title="post.title"
      @enlarge-text="postFontSize += 0.1"
    ></blog-post>
  </div>
</div>
```

```js
const app = Vue.createApp({
  data() {
    return {
      posts: [
        { id: 1, title: 'My journey with Vue' },
        { id: 2, title: 'Blogging with Vue' },
        { id: 3, title: 'Why Vue is so fun' },
      ],
      postFontSize: 1,
    };
  },
});

app.component('blog-post', {
  props: ['title'],
  template: `
    <div class="blog-post">
      <h4>{{ title }}</h4>
      <button @click="$emit('enlargeText')">
        Enlarge text
      </button>
    </div>
  `,
});

app.mount('#blog-posts-events-demo');
```

```js
// 组件的 emits 选项中列出已抛出的事件
app.component('blog-post', {
  props: ['title'],
  emits: ['enlargeText'],
});
// 这将允许我们检查组件抛出的所有事件，还可以选择验证它们。
```

## 使用事件抛出一个值

```html
<!-- 
  让 <blog-post> 组件决定它的文本要放大多少。这时可以使用 $emit 的第二个参数来提供这个值：
 -->
<button @click="$emit('enlargeText', 0.1)">Enlarge text</button>

<!-- 然后当在父级组件监听这个事件的时候，我们可以通过 $event 访问到被抛出的这个值： -->
<blog-post ... @enlarge-text="postFontSize += $event"></blog-post>

<!-- 如果这个事件处理函数是一个方法： -->
<blog-post ... @enlarge-text="onEnlargeText"></blog-post>

<!-- 那么这个值将会作为第一个参数传入这个方法： -->

methods: { onEnlargeText(enlargeAmount) { this.postFontSize += enlargeAmount } }
```

## 在组件上使用 v-model

```html
<!-- 
  自定义事件也可以用于创建支持 v-model 的自定义输入组件。
-->

<input v-model="searchText" />

<!-- 等价于： -->
<input :value="searchText" @input="searchText = $event.target.value" />

<!-- 
  当用在组件上时，v-model 则会这样：
-->
<custom-input
  :model-value="searchText"
  @update:model-value="searchText = $event"
></custom-input>
```

```js
app.component('custom-input', {
  props: ['modelValue'],
  emits: ['update:modelValue'],
  template: `
    <input
      :value="modelValue"
      @input="$emit('update:modelValue', $event.target.value)"
    >
  `,
});
```

```html
<!-- 
  现在 v-model 就可以在这个组件上完美地工作起来了：
-->
<custom-input v-model="searchText"></custom-input>
```

## 实现 v-model 的另一种方法

```js
// 使用 computed property 的功能来定义 getter 和 setter。
app.component('custom-input', {
  props: ['modelValue'],
  emits: ['update:modelValue'],
  template: `
    <input v-model="value">
  `,
  computed: {
    value: {
      get() {
        return this.modelValue;
      },
      set(value) {
        this.$emit('update:modelValue', value);
      },
    },
  },
});
```

## 通过插槽分发内容

```html
<alert-box> Something bad happened. </alert-box>
```

```js
// 通过使用 Vue 的自定义 <slot> 元素来实现：

app.component('alert-box', {
  template: `
    <div class="demo-alert-box">
      <strong>Error!</strong>
      <slot></slot>
    </div>
  `,
});
```

## 动态组件

```html
<!-- 组件会在 `currentTabComponent` 改变时改变 -->
<!-- <component :is="currentTabComponent"></component> -->

<div id="dynamic-component-demo" class="demo">
  <button
    v-for="tab in tabs"
    v-bind:key="tab"
    v-bind:class="['tab-button', { active: currentTab === tab }]"
    v-on:click="currentTab = tab"
  >
    {{ tab }}
  </button>

  <component v-bind:is="currentTabComponent" class="tab"></component>
</div>
```

```js
const app = Vue.createApp({
  data() {
    return {
      currentTab: 'Home',
      tabs: ['Home', 'Posts', 'Archive'],
    };
  },
  computed: {
    currentTabComponent() {
      return 'tab-' + this.currentTab.toLowerCase();
    },
  },
});

app.component('tab-home', {
  template: `<div class="demo-tab">Home component</div>`,
});
app.component('tab-posts', {
  template: `<div class="demo-tab">Posts component</div>`,
});
app.component('tab-archive', {
  template: `<div class="demo-tab">Archive component</div>`,
});

app.mount('#dynamic-component-demo');
```

## 解析 DOM 模板时的注意事项

```html
<table>
  <blog-post-row></blog-post-row>
</table>
<!-- 
  <blog-post-row> 会被作为无效的内容提升到外部，并导致最终渲染结果出错。我们可以使用特殊的 is attribute 作为一个变通的办法：
 -->
<table>
  <tr is="vue:blog-post-row"></tr>
</table>
```

## HTML attribute 名不区分大小写

```js
//  在 JavaScript 中是驼峰式
app.component('blog-post', {
  props: ['postTitle'],
  template: `
    <h3>{{ postTitle }}</h3>
  `,
});
```

```html
<!-- 在 HTML 中则是横线字符分割 -->
<blog-post post-title="hello!"></blog-post>
```
