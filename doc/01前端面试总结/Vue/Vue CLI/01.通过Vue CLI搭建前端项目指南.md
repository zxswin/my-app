## Vue CLI 知识要点指南

## 通过 Vue cli 搭建前端项目

- 第一步: 全局安装@vue/cli

```bash
# 安装
# npm install -g @vue/cli
# OR
# yarn global add @vue/cli

# 检查安装是否成功
# vue --version


# 升级
# npm update -g @vue/cli
# 或者
# yarn global upgrade --latest @vue/cli


# 依赖升级
# 可以在创建的项目下执行
# vue upgrade

# -t, --to <version>    升级 <plugin-name> 到指定的版本
# -f, --from <version>  跳过本地版本检测，默认插件是从此处指定的版本升级上来
# -r, --registry <url>  使用指定的 registry 地址安装依赖
# --all                 升级所有的插件
# --next                检查插件新版本时，包括 alpha/beta/rc 版本在内
# -h, --help            输出帮助内容

```

- 全局安装 npm 模块在 mac 电脑下遇到的权限问题及解决方案

```bash
# 可通过如下命令安装
# sudo npm install -g @vue/cli
```

- 第二步：通过@vue/cli 创建一个项目

```bash
# 创建一个项目
# vue create hello-world
# 选择手动添加特性的选项
```

- vue cli plugin 插件的安装

```bash
# 安装并调用 vue-cli-plugin-apollo
# vue add apollo
```

- vue plugin 的插件配置

```json
// 如果你有一个 .config/package.json 文件：
{
  "vuePlugins": {
    "resolveFrom": ".config"
  }
}
```

- 启动项目

```js
// vue-cli-service serve
// 执行npm run serve

// 选项：
// --open    在服务器启动时打开浏览器
// --copy    在服务器启动时将 URL 复制到剪切版
// --mode    指定环境模式 (默认值：development)
// --host    指定 host (默认值：0.0.0.0)
// --port    指定 port (默认值：8080)
// --https   使用 https (默认值：false)

// 可以使用 vue.config.js 里的 devServer 字段配置开发服务器。
```

- 项目生产版本的构建

```js
// vue-cli-service build
// 执行npm run serve build

// --mode        指定环境模式 (默认值：production)
// --dest        指定输出目录 (默认值：dist)
// --modern      面向现代浏览器带自动回退地构建应用
// --target      app | lib | wc | wc-async (默认值：app)
// --name        库或 Web Components 模式下的名字 (默认值：package.json 中的 "name" 字段或入口文件名)
// --no-clean    在构建项目之前不清除目标目录的内容
// --report      生成 report.html 以帮助分析包内容
// --report-json 生成 report.json 以帮助分析包内容
// --watch       监听文件变化
```

- vue-cli-service inspect

```js
// 你可以使用 vue-cli-service inspect 来审查一个 Vue CLI 项目的 webpack config。
```

- 缓存和并行处理

```js
// cache-loader 会默认为 Vue/Babel/TypeScript 编译开启。文件会缓存在 node_modules/.cache 中——如果你遇到了编译方面的问题，记得先删掉缓存目录之后再试试看。
// thread-loader 会在多核 CPU 的机器上为 Babel/TypeScript 转译开启。
```

- Git Hook

```json
// 在安装之后，@vue/cli-service 也会安装 yorkie，它会让你在 package.json 的 gitHooks 字段中方便地指定 Git hook：

{
  "gitHooks": {
    "pre-commit": "lint-staged"
  },
  "lint-staged": {
    "*.{js,vue}": "vue-cli-service lint"
  }
}
```
