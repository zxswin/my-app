# Three.js 中的常用几何体

```js
// 常用的几何体。

// THREE.CircleGeometry 圆形
// THREE.RingGeometry 环形
// THREE.PlaneGeometry 平面
// THREE.ShapeGeometry 任意图形
// THREE.BoxGeometry 长方体
// THREE.SphereGeometry 球体
// THREE.CylinderGeometry 圆柱体
// THREE.ConeGeometry 圆锥体
// THREE.TorusGeometry 环形
// THREE.TorusKnotGeometry 环形扭结
// THREE.PolyhedronGeometry 多面体
// THREE.IcosahedronGeometry 二十面体
// THREE.OctahedronGeometry 八面体
// THREE.TetralaHedronGeometry 四面体
// THREE.DodecahedronGeometry 十二面体

// THREE.BufferGeometry类中提供两个重要的属性，需要大家熟练掌握。

// attributes（分量）	分量属性将数据直接送往CPU进行处理。你定义一个形体，你需要至少创建一个Float32Array数组，其中每三个要素定义一个顶点的三维空间坐标。每三个顶点（即数组中的九个要素）确定一个面。该数组可以向下面这样创建并传到分量中：
// geometry.addAttribute('position', new THREE.BufferAttribute(arrayOfVetices, 3))

// index（索引）	一般不需要特意指定面，因为默认情况下position分量中，每三个空间坐标确定一个面。但我们也可以通过index属性像THREE.geometry类一样去指定用于组成每一个面的顶点。
```

## 二维几何体

```js
// 我们先讲解几个二维几何体：

// THREE.CircleGeometry 圆形
// THREE.RingGeometry 环形
// THREE.PlaneGeometry 平面
// THREE.ShapeGeometry 任意图形
```

- 1.1 THREE.PlaneGeometry 平面

```js
// THREE.PlaneGeometry 可以用来创建非常简单的二维平面。

// width（宽度）	是	指定矩形宽度
// height（高度）	是	指定矩形高度
// widthSegments（宽度段数）	否	指定矩形宽度应该划分为几段。默认值为1
// heightSegments（高度段数）	否	指定矩形高度应该划分为几段。默认值为1

// 我们可以看出，该几何体并不复杂，如果你想创建一个拥有多个方格的样式，可以使用 widthSegments、heightSegments 将几何体划分为多个面。

// 创建PlaneGeometry
const planeGeometry = new THREE.PlaneGeometry(50, 30, 4, 4);
const planeMaterial = new THREE.MeshBasicMaterial({
  wireframe: true,
  color: 'red',
});
const plane = new THREE.Mesh(planeGeometry, planeMaterial);
plane.rotation.x = (90 * Math.PI) / 180; // x轴旋转180度
scene.add(plane);
```

- 1.2 THREE.CircleGeometry 圆形

```js
// 你可以通过这个类创建一个非常简单的二维圆。
// radius	否	决定圆半径，默认50。
// segments	否	定义创建圆所用面的数量，最小为3，默认为8，数量越多圆越光滑。
// thetaStar	否	定义从哪开始画，范围是 0-2Π，默认0。
// thetaEnd	否	定义圆从哪结束绘制，默认 2Π（整圆）。

// 创建 THREE.CircleGeometry 圆形
const circleGeometry = new THREE.CircleGeometry(20, 80);
const circleMaterial = new THREE.MeshBasicMaterial({
  color: 'red',
  wireframe: true,
});
const circle = new THREE.Mesh(circleGeometry, circleMaterial);
scene.add(circle);
```

## 1.3 THREE.RingGeometry 环形

```js
// 该对象与THREE.CircleGeometry非常类似，该对象可以在中心定义一个“孔”。
// innerRadius	否	圆环内半径，如果定义为0，则不显示孔。默认0。
// outerRadius	否	外半径，它定义圆环的尺寸。指圆心到圆弧的距离。默认0。
// thetaSegment	否	定义创建圆所对角三角形的数量，默认为8，数量越多圆环越光滑。
// phiSegment	否	定义沿着圆环长度所需要线段的数量，该属性会增加面的数量，对平滑度没影响。默认为8。
// thetaStar	否	定义从哪开始画环，范围是 0-2Π，默认0。
// thetaLength	否	该属性定义圆要多大。默认 2 * PI（整圆），结合thetaStar使用

// THREE.RingGeometry 环形
const ringGeometry = new THREE.RingGeometry(10, 20, 30, 10);
const ringMaterial = new THREE.MeshBasicMaterial({
  color: 'red',
  wireframe: true,
});
const ring = new THREE.Mesh(ringGeometry, ringMaterial);
scene.add(ring);
```

- 1.4 THREE.ShapeGeometry 任意图形

```js
// 该对象可以自定义你想要的二维图形。
// THREE.ShapeGeometry 包含两个参数：THREE.Shape对象（可以shapes数组）和一个options配置对象。

new THREE.ShapeGeometry(shapes, options);

// shape对象，我的个人理解，就像是我们用canvas2D绘制完2D图形后，传到ShapeGeometry中绘制到3D界面上。
// ShapeGeometry相关参数：

// shaps	是	THREE.Shape对象（可以shapes数组）

// options	否	还可以传入一些选项，这些选项可以应用于使用shapes参数传入的所有图形。关于这些选项的解释如下：

// curveSegments：此属性确定从图形创建的曲线的平滑程度。默认值为12。material：这是用于为指定图形创建的面的materialIndex属性。当把THREE.MeshFaceMaterial和此几何体一起使用时，materialIndex属性决定传入的材质中的哪些材质用于传入的图形的面UVGenerator：当对材质使用纹理时，UV映射决定纹理的哪个部分用于特定的面。使用UVGenerator属性，可以传入自己的对象，这将为传入的图形穿件的面创建UV设置。
```

- THREE.Shape 相关方法如下：

```js
// moveTo(x,y)	该函数将绘图点移动到指定的x、y坐标处
// lineTo(x,y)	该函数从当前位置（例如由moveTo函数设定的位置）绘制一条线到指定的x和y坐标处
// quadraticCurveTo(aCPx,aCPy,x,y)	可以使用两种不同方式来指定曲线：使用quadraticCurveTo函数，或使用bezierCurveTo函数。两个函数的区别在于指定曲线曲率的方法。
// 对于二次曲线，我们要额外指定一个点（使用aCPx和aCPy参数），曲线仅基于该点绘制，当然还需要指定端点（x和y参数）。对于三次曲线（由bezierCurveTo函数绘制），你需要多指定两个点才能定义曲线。起始点是路径的当前位置。
// bezierCurveTo(aCPx1,aCPy1,aCPx2,aCPy2,x,y)	根据提供的参数绘制一条曲线。相关说明可以参考前一行的内容。该曲线的绘制局域两个定义曲线的坐标(aCPx1和aCPy1,aCPx2和aCPy2)以及终点坐标(x和y)。起始点是路径的当前位置。
// splineThru(pts)	该函数沿着提供的坐标集合pts绘制一条光滑曲线。这个参数应该是一个THREE.Vector2对象数组。起始点是路径的相对位置
// arc(aX,aY,aRadius,aStartAngle,andAngle,aClockwise)	该函数用来画圆（或一段圆弧）。圆弧起始于路径的当前位置。aX和aY用来指定于当前位置的偏移量。aRadius设置圆的大小，而aStartAngle和aEndAngle则用来定义圆弧要画多长。布尔属性aClockwise决定这段圆弧是顺时针还是逆时针画。
// absArc(aX,aY,aRadius,aStartAngle,andAngle,aClockwise)	参考arc函数的描述。其位置是绝对位置，而不是相对于当前的位置
// ellipse(aX,aY,aRadius,aStartAngle,andAngle,aClockwise)	参考arc函数的描述。作为补充，通过ellipse函数，可以分别指定x轴半径和y轴半径
// absEllipse(aX,aY,aRadius,aStartAngle,andAngle,aClockwise)	参考ellipse函数的描述。其位置是绝对位置，而不是相对于当前的位置。
// fromPoints(vectors)	如果给该函数传入一个THREE.Vector2(或THREE.Vector3)对象数组，Three.js会创建一条通过提供的顶点使用直线绘制的路径
// holes	属性包含一个THREE.Shape对象数组。这个数组中的每一个对象会渲染为一个孔。关于这个属性的一个很好的例子就是我们在本节开头看到的例子。在那段代码段中，我们添加了三个THREE.Shape对象到这个数组，一个用来渲染左边的孔，一个用来渲染右边的孔，还有一个渲染主要THREE.Shape对象

// 自定义二维图形
function drawShape() {
  // create a basic shape
  const shape = new THREE.Shape();

  // startpoint
  shape.moveTo(10, 10);

  // straight line upwards
  shape.lineTo(10, 40);

  // the top of the figure, curve to the right
  shape.bezierCurveTo(15, 25, 25, 25, 30, 40);

  // spline back down
  shape.splineThru([
    new THREE.Vector2(32, 30),
    new THREE.Vector2(28, 20),
    new THREE.Vector2(30, 10),
  ]);

  // curve at the bottom
  shape.quadraticCurveTo(20, 15, 10, 10);

  // add 'eye' hole one
  const hole1 = new THREE.Path();
  hole1.absellipse(16, 24, 2, 3, 0, Math.PI * 2, true);
  shape.holes.push(hole1);

  // add 'eye hole 2'
  const hole2 = new THREE.Path();
  hole2.absellipse(23, 24, 2, 3, 0, Math.PI * 2, true);
  shape.holes.push(hole2);

  // add 'mouth'
  const hole3 = new THREE.Path();
  hole3.absarc(20, 16, 2, 0, Math.PI, true);
  shape.holes.push(hole3);

  // return the shape
  return shape;
}

const shapeGeometry = new THREE.ShapeGeometry(drawShape());
const shapeGeometryMaterial = new THREE.MeshBasicMaterial({
  color: 'red',
});
const shapeMesh = new THREE.Mesh(shapeGeometry, shapeGeometryMaterial);
scene.add(shapeMesh);
```

## 三维几何体

- 2.1 THREE.BoxGeometry

```js
// THREE.BoxGeometry 是一种非常简单的几何体，只需要指定宽度、高度和深度就可以创建一个长方体。

// width	是	宽度，沿X轴方向的长度
// height	是	高度，沿Y轴方向的长度
// depth	是	深度，沿Z轴方向的长度
// widthSegment	否	沿X轴方向将面分成多少份，默认1
// heightSegment	否	沿Y轴方向将面分成多少份，默认1
// depthSegment	否	沿Z轴方向将面分成多少份，默认1

const boxGeometry = new THREE.BoxGeometry(10, 10, 20, 4, 4, 4);
const boxMaterial = new THREE.MeshBasicMaterial({
  color: 'red',
  wireframe: true,
});
const boxMesh = new THREE.Mesh(boxGeometry, boxMaterial);
scene.add(boxMesh);
```

- 2.2 THREE.SphereGeometry

```js
// THREE.SphereGeometry 你可以创建一个三维球体。

// radius	否	设置球体半径，默认50
// widthSegment	否	指定竖直方向的分段数，段数越多球体越光滑。默认为8，最小为3。
// heightSegment	否	指定水平方向的分段数，段数越多球体越光滑。默认为6，最小为2。
// phiStart	否	指定从X轴什么方向开始绘制球体，范围 0 - 2 * PI。默认 0。
// phiLength	否	指定从 phiStart 开始画多少。 2 * PI 是整球。默认 2 * PI。
// thetaStart	否	指定从Y轴什么方向开始绘制球体，范围 0 - PI。默认 0。
// thetaLength	否	指定从 thetaStar 开始画多少。 PI 是整球。默认 PI。

const sphereGeometry = new THREE.SphereGeometry(
  20,
  50,
  50,
  0,
  (270 * Math.PI) / 180,
  0,
  0.5 * Math.PI
);
const sphereMaterial = new THREE.MeshBasicMaterial({
  color: 'red',
  wireframe: true,
});
const sphereMesh = new THREE.Mesh(sphereGeometry, sphereMaterial);
scene.add(sphereMesh);
```

- 2.3 THREE.CylinderGeometry

```js
// 该几何体可以创建类似于圆柱的几何体。
// radiusTop	否	圆柱顶部尺寸，默认20。
// radiusBottom	否	圆柱底部尺寸，默认20。
// height	否	圆柱高度，默认100。
// radialSegments	否	沿圆柱半径分为多少份，越多越光滑。默认8。
// heightSegments	否	沿圆柱高分为多少份，越多意味着面越多。默认1。
// openEnded	否	圆柱顶部和底部是否封闭，默认false
// thetaStart	否	指定从X轴什么方向开始绘制球体，范围 0 - 2 * PI。默认 0。
// thetaLength	否	决定圆柱有多少面被绘制， 2 * PI 时绘制完整圆柱面。默认2 * PI。

const cylinderGeometry = new THREE.CylinderGeometry(
  5,
  5,
  10,
  30,
  10,
  true,
  0,
  (300 * Math.PI) / 180
);
const cylinderMaterial = new THREE.MeshBasicMaterial({
  color: 'red',
  wireframe: true,
});
const cylinderMesh = new THREE.Mesh(cylinderGeometry, cylinderMaterial);
scene.add(cylinderMesh);
```

- 2.4 THREE.ConeGeometry

```js
// 该几何体可以创建圆锥几何体，它几乎拥有THREE.CylinderGeometry的所有属性，唯一区别是不支持radiusTop（顶部半径）和 radiusBottom（底部半径），而是支持一个radius半径属性。

const ConeGeometry = new THREE.ConeGeometry(
  5,
  10,
  30,
  10,
  false,
  0,
  (300 * Math.PI) / 180
);
const ConerMaterial = new THREE.MeshLambertMaterial({
  color: 'red',
  side: THREE.DoubleSide,
});
const coneMesh = new THREE.Mesh(ConeGeometry, ConerMaterial);
scene.add(coneMesh);
```

- 2.5 THREE.TorusGeometry

```js
// 该几何体可以创建一个圆环。

// radius	否	圆环尺寸，默认100。
// tube	否	圆环（管）半径，默认40。
// radiusSegments	否	沿圆环长度方向分成的段数，默认8。
// thbularSegments	否	沿圆环宽度方向分成的段数,段数越多越光滑，默认6。
// arc	否	控制是否绘制完整的圆环，默认 2 * PI。

const torusGeometry = new THREE.TorusGeometry(
  10,
  2,
  10,
  20,
  (270 * Math.PI) / 180
);
const torusMaterial = new THREE.MeshBasicMaterial({
  color: 'red',
  wireframe: true,
});
const torusMesh = new THREE.Mesh(torusGeometry, torusMaterial);
scene.add(torusMesh);
```

- 2.6 THREE.TorusKnotGeometry

```js
// 该几何体可以创建一个环状扭结，我们通过调整参数 p 和 q 可以形成非常漂亮的扭结。

// radius	否	完整的圆环尺寸，默认100。
// tube	否	圆管半径。
// radiusSegmennt	否	沿环状扭结长度方向分成的段数。
// tubularSegment	否	沿环状扭结宽度方向分成的段数，越多越平滑。
// p	否	扭结形状，默认2。
// q	否	扭结形状，默认3。
// heightScale	否	拉伸环状扭结，默认1。

const torusKnotGeometry = new THREE.TorusKnotGeometry(10, 2, 60, 60, 2, 3);
const torusKnotMaterial = new THREE.MeshLambertMaterial({
  color: 'red',
});
const torusKnotMesh = new THREE.Mesh(torusKnotGeometry, torusKnotMaterial);
scene.add(torusKnotMesh);
```

- 2.7 THREE.PolyhedronGeometry

```js
// 该几何体可以很容易的创建多面体，多面体是只有平面和直边的几何体。

// 该类接受四个属性：

// vertices	是	设置构成多面体的顶点。
// indices	是	设置由vertices创建出的面。
// radius	否	设置多面体的大小。
// detail	否	为多面体添加额外的细节。如果为1，则多面体的每个三角形都会分成4个小三角。2则会分成16个。以此类推。

const vertices = [1, 1, 1, -1, -1, -1, -1, 1, -1, 1, -1, -1];
const indices = [2, 1, 0, 0, 3, 2, 1, 3, 0, 2, 3, 1];
const polyhedronGeometry = new THREE.PolyhedronGeometry(
  vertices,
  indices,
  10,
  2
);
const polyhedronMaterial = new THREE.MeshBasicMaterial({
  color: 'blue',
  wireframe: true,
});
const polyhedronMesh = new Mesh(polyhedronGeometry, polyhedronMaterial);
scene.add(polyhedronMesh);
```

- 2.8 THREE.IcosahedronGeometry

```js
// 该几何体可以创造一个有20个相同三角形的多面体，你只需要指定radius和detail值即可。
const icosahedronGeometry = new THREE.IcosahedronGeometry(10);
const icosahedronMaterial = new THREE.MeshLambertMaterial({
  color: 'blue',
});
const icosahedronMesh = new Mesh(icosahedronGeometry, icosahedronMaterial);
scene.add(icosahedronMesh);
```

- 2.9 THREE.TetrahedronGeometry

```js
// 该几何体创建一个四面体，该多面体只包含四个顶点创建的四个三角形面，同样你只需要指定radius和detail值即可。
```

- 2.10 THREE.OctahedronGeometry

```js
// 该几何体创建一个八面体，由六个顶点创建而出，同样你只需要指定radius和detail值即可。
```

- 2.11 THREE.DodecahedronGeometry

```js
// 该几何体创建一个十二面体，同样你只需要指定radius和detail值即可。
```
