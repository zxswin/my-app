## ThreeJs 中的光源

- 常用的光源

```js
// THREE.AmbientLight	这是一个基本光源，该光源的颜色将会叠加到场景现有物体的颜色上。
// THREE.PointLight	这是一个点光源，从空间的一点向所有方向发射光线，点光源无法创建阴影。
// THREE.SpotLight	这是聚光灯，类似于台灯、吊灯或者手电筒，该光源可以产生阴影。
// THREE.DirectionalLight	该光源被称之为无限光，该光源的光线是平行的，例如，太阳光线，，该光源可以产生阴影。
// THREE.HemisphereLigght	这是一个特殊的光源，可以通过模拟反光面，和光线微弱的天空，来创建出更加自然的室外光，该光源不提供阴影效果。
// THREE.AreaLight	该光线可以指定散发光线的平面，而不是一点，该光源不提供阴影效果。
// THREE.LensFlare	这不是光源，但是通过它可以为场景中的指定光源添加镜头光晕的效果。
```

## 基础光源

```js
// 我们先看基础光源——AmbientLight、PointLight、SpotLight、DirectionalLight，这些光源全部是THREE.Light的派生类，这些光源全部都是基础光源，适用于大部分需求场景。剩下的都是特殊光源，在极其特殊的情况下，才会考虑使用。
```

- 1. THREE.AmbientLight

```js
// 在创建THREE.AmbientLight时，颜色会应用到全局，该光源没有特别的来源方向，也不会产生阴影。通常，该光源不是场景中的唯一光源，因为它会将场景中的所有物体渲染为相同的颜色，它通常与其他光源同时使用，目的是弱化阴影或给场景中添加额外的颜色。

// 使用该光源需要注意，着色一定要趋于保守，否则场景的颜色会过于饱和或者昏暗。

// THREE.AmbientLight 光源
// 该对象还支持传入第二个参数 intensity，来指定光线的强弱，默认为1。
const AmbientLight = new THREE.AmbientLight('#606008');
scene.add(AmbientLight);
```

- THREE.SpotLight

```js
// THREE.SpotLight 聚光灯光源，是我们经常使用的光源之一。
// 该光源，是一种具有锥形光源的效果，你可以把它当作手电筒或者灯塔一样，该光源具有方向和角度。

// 聚光灯光源的所有相关属性

// angle（角度）	光源发射出光的宽度，单位是弧度，默认值为 Math.PI / 3
// caseShadow（投影）	如果设置为true，就会产生阴影
// color	光源颜色
// decay（衰减）	光源强度会随着离开光源距离而衰减，建议设置值为2，更接近现实。默认值为1。当WebGLRenderer的属性physicallyCorrectLights（物理正确光源）被设置为启动时，decay才会生效。
// distance（距离）	光源照射距离，默认值为0，意味着光线不会因为光源距离而衰减。
// intensity（强度）	光源的照射强度，默认为1
// penumbra（半影区）	该属性设置聚光灯的锥形照明区域在其他区域边缘的平滑衰减速度，取值范围为0-1，默认为0
// position（位置）	光源在场景中的位置
// power（功率）	WebGLRenderer的属性physicallyCorrectLights（物理正确光源）被设置为启动时，该属性指定光源的功率，该属性以流明为单位，默认值为 4 * Math.PI
// target（目标）	设置光源的指向，可以指向场景中的特定对象或者位置。传值必须为一个Object3D对象，例如Mesh。
// visible（是否可见）	true光源打开，false光源关闭。
```

```js
// 当 castShadow 启动时，可以设置阴影特效属性。
// shadow.bias（阴影偏移）	用来偏置阴影的位置。属性默认值为0。当你渲染的阴影有感觉有点奇怪时，将该属性设置为0.01，通常可以解决你的问题。
// shadow.camera.far（投影远点）	到距离光源的哪一个位置可以产生阴影，默认为5000。
// shadow.camera.fov（投影视场）	设置阴影生成视场的大小，默认50。
// shadow.camera.near（投影近点）	到距离光源的哪一个位置开始产生阴影，默认为50
// shadow.mapSize.width和shadow.mapSize.height（阴影映射的宽度和高度）	决定用多少像素用来产生阴影，默认值为512。
// shadow.radius（半径）	该值大于1时，阴影边缘将会有平滑效果。
```

```js
// 创建聚光灯光源非常简单，只需要指定颜色、设置各个属性并添加到场景中即可。
const spotLight = new THREE.SpotLight(0xffffff);
spotLight.position.set(-40, 40, -15);
spotLight.castShadow = true;
spotLight.shadow.mapSize = new THREE.Vector2(1024, 1024);
spotLight.shadow.camera.far = 130;
spotLight.shadow.camera.near = 40;
spotLight.distance = 0;
spotLight.target = plane;
spotLight.angle = 0.4;
spotLight.shadow.camera.fov = 120;
scene.add(spotLight);

// 如何让聚光灯指向某个点呢？
const target = new THREE.Object3D();
target.position = new THREE.Vector(5, 0, 0);
spotLiht.target = target;
```

- 3. THREE.PointLight

```js
// THREE.PointLight 点光源，是一种单点发光，照射所有方向的光源。
// 点光源也有一些属性：

// color（颜色）	光源颜色
// distance（距离）	光源照射距离，默认为0.意味着光的强度不会因为距离而减弱
// intensity（强度）	光的照射强度，默认为1
// position（位置）	光源所在场景中的位置
// visible（是否可见）	true光源打开，false光源关闭。
// decay（衰减）	光源强度会随着离开光源距离而衰减，建议设置值为2，更接近现实。默认值为1。当WebGLRenderer的属性physicallyCorrectLights（物理正确光源）被设置为启动时，decay才会生效。
// power（功率）	WebGLRenderer的属性physicallyCorrectLights（物理正确光源）被设置为启动时，该属性指定光源的功率，该属性以流明为单位，默认值为 4 * Math.PI
```

```js
// 点光源同样可以设置阴影。
// 点光源
const pointLigh = new THREE.PointLight('#ccffcc');
pointLigh.dispose = 100;
pointLigh.position.set(3, 0, 10);
scene.add(pointLigh);
```

- 4. THREE.HemisphereLight

```js
// THREE.HemisphereLight 是一种特殊光源，它被称为自然光。因为大自然的光线很复杂，有的来自物体的折射等等，很难模拟。所以，THREE.HemisphereLight 的出现，很好的解决了这一问题。

// 它有如下可供选择的属性：
// groundColor	从地面发出的光线的颜色
// color	从天空发出的光线的颜色
// intensity	光线照射的强度

// 自然光
const hemiLight = new THREE.HemisphereLight(0x0000ff, 0x00f00, 0.6);
hemiLight.position.set(0, 500, 0);
scene.add(hemiLight);
```

- 5. THREE.AreaLight

```js
// 定义一个长方形发光区域。
// 该对象三个参数为 颜色、光强度、宽度、高度。
const areaLight = new THREE.AreaLight(0xff0000, 500, 4, 10);
areaLight.position.set(-10, 10, -35);
scene.add(areaLight);
```

- 6. 镜头光晕

```js
// 当你对着太阳，或者非常明亮的光源拍照时，会出现镜头光晕。当然，Three.js 也支持这样的效果。
// 首先，我们需要创造镜头光晕的对象。

import Lensflare from 'three/examples/jsm/objects/Lensflare';
const lensflare = new Lensflare(texture, size, distance, color);

// texture	纹理图片，决定光晕的形状
// size	光晕大小，如果-，将使用它本身大小
// distance	光源（0）到摄像机（1）的距离
// color	光晕的颜色
```
