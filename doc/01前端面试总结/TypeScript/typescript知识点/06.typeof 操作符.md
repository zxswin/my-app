## typeof 操作符

```ts
/**
 * 在 TypeScript 中，typeof 操作符可以用来获取一个变量或对象的类型。
 */
interface Person {
  name: string;
  age: number;
}

const sem: Person = { name: 'semlinker', age: 30 };
type Sem = typeof sem; // type Sem = Person

const kakuqo = {
  name: 'kakuqo',
  age: 30,
  address: {
    province: '福建',
    city: '厦门',
  },
};

type Kakuqo = typeof kakuqo;
/*
 type Kakuqo = {
    name: string;
    age: number;
    address: {
        province: string;
        city: string;
    };
}
*/
```

- 获取函数对象的类型

```ts
function toArray(x: number): Array<number> {
  return [x];
}

type Func = typeof toArray; // -> (x: number) => number[]
```

- const 断言

```ts
/**
 * 表达式中的任何字面量类型都不应该被扩展；
 * 对象字面量的属性，将使用 readonly 修饰；
 * 数组字面量将变成 readonly 元组。
 */

let x = 'hello' as const;
type X = typeof x; // type X = "hello"

let y = [10, 20] as const;
type Y = typeof y; // type Y = readonly [10, 20]

let z = { text: 'hello' } as const;
type Z = typeof z; // let z: { readonly text: "hello"; }

type Data = typeof y[number]; // type Data = 10 | 20

const locales = [
  {
    locale: 'zh-CN',
    language: '中文',
  },
  {
    locale: 'en',
    language: 'English',
  },
] as const;

// type Locale = "zh-CN" | "en"
type Locale = typeof locales[number]['locale'];

// const 断言只适用于简单的字面量表达式
let a = (Math.random() < 0.5 ? 0 : 1) as const; // error

let b = Math.random() < 0.5 ? (0 as const) : (1 as const);

// const 上下文不会立即将表达式转换为完全不可变
let arr = [1, 2, 3, 4];

let foo = {
  name: 'foo',
  contents: arr,
} as const;

foo.name = 'bar'; // error!
foo.contents = []; // error!

foo.contents.push(5); // ...works!
```
