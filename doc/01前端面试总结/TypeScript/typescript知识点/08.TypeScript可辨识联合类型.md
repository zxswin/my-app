## TypeScript 可辨识联合类型

- 一个经典案例

```ts
/**
 * 可辨识 联合类型 类型守卫
 */

enum CarTransmission {
  Automatic = 200,
  Manual = 300,
}

// 先创建多个类型,它们都具备有一个相同的属性,称为公共属性

interface Motorcycle {
  vType: 'motorcycle'; // discriminant
  make: number; // year
}

interface Car {
  vType: 'car'; // discriminant
  transmission: CarTransmission;
}

interface Truck {
  vType: 'truck'; // discriminant
  capacity: number; // in tons
}

interface Bicycle {
  vType: 'bicycle';
  make: number;
}

// 基于上面的接口创建一个联合属性
type Vehicle = Motorcycle | Car | Truck | Bicycle;

// 实现一个类型守护的方法 并实现穷举检查
function evaluatePrice(vehicle: Vehicle) {
  switch (vehicle.vType) {
    case 'car':
      return vehicle.transmission * EVALUATION_FACTOR;
    case 'truck':
      return vehicle.capacity * EVALUATION_FACTOR;
    case 'motorcycle':
      return vehicle.make * EVALUATION_FACTOR;
    case 'bicycle':
      return vehicle.make * EVALUATION_FACTOR;
    default:
      // 如果新增的接口没有对应的处理则会走到这里，它不可以赋值给never类型 所以会报错提示
      // Type 'Bicycle' is not assignable to type 'never'.

      const invalidVehicle: never = vehicle;
      throw new Error(`Unknown vehicle: ${invalidVehicle}`);
  }
}
```
