## 高阶组件

```tsx
/**
 * 高阶组件是复用组件逻辑的一种高阶技巧,是基于React组合特性而形成的一种设计模式
 * 注意点:
 * 1.不要在render方法中使用HOC
 * 2.如果使用到包装组件的静态方法需要单独拷贝这些静态方法
 * 3.使用 hoist-non-react-statics 自动拷贝所有非 React 静态方法
 * 4.ref不会被传递
 * 如果将ref添加到返回的HOC高阶组件中,则ref指向容器组件,而不是包装组件
 * 5.高阶组件可以使用with开头
 */

import React, { Component } from 'react';

// 接收一个组件
const withSubscription = (WrappedComponent, selectData) => {
  // 并返回另外一个组件
  return class extends Component<any, any> {
    constructor(props) {
      super(props);
      this.state = {
        data: selectData(),
      };
    }

    render() {
      return <WrappedComponent data={this.state.data} {...this.props} />;
    }
  };
};

// 包装组件1
class Comlist1 extends Component<any, any> {
  constructor(props) {
    super(props);
  }

  render() {
    return (
      <React.Fragment>
        <div>这是包装组件1：</div>
        <p>{this.props.data}</p>
      </React.Fragment>
    );
  }
}

// 包装组件二
class Comlist2 extends Component<any, any> {
  constructor(props) {
    super(props);
  }

  render() {
    return (
      <React.Fragment>
        <div>这是包装组件2：</div>
        <p>{this.props.data}</p>
      </React.Fragment>
    );
  }
}

const Comlist1WithSubscription = withSubscription(Comlist1, () => '包装组件1');
const Comlist2WithSubscription = withSubscription(Comlist2, () => '包装组件2');

class Game extends Component<any, any> {
  render() {
    return (
      <React.Fragment>
        <Comlist1WithSubscription />
        <Comlist2WithSubscription />
      </React.Fragment>
    );
  }
}

export default Game;
```
