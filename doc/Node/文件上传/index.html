<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>fileApi实现Ajax上传文件</title>
    <link rel="stylesheet" href="">
<script>
    function selfile(){
        var file = document.getElementsByTagName('input')[0].files[0];//js读取上传文件
        var con = '';
        con += '文件名：' + file.name + '<br/>';
        con += '大小：' + file.size;
        document.getElementById('debug').innerHTML = con;//把文件名和大小显示在页面中
        var fd = new FormData();//创建FormData对象
        fd.append('pic',file);//添加文件数据
        //ajax上传文件
        // var xhr = new XMLHttpRequest();
        // xhr.open('POST','11-fileApi.php',true);
        // xhr.send(fd);
        setTimeout(()=>{
          console.log('fd',fd,);
          console.log('file',file);

        },2000);
        
        var img = document.createElement('img');//动态创建img标签
        img.src = window.URL.createObjectURL(file);//把二进制对象直接读出浏览器显示的资源
        document.getElementsByTagName('body')[0].appendChild(img);//把img标签动态添加到dom树中
    }
</script>
</head>
<body>
    <input type="file" name="pic" onchange="selfile();" />
    <div id="debug"></div>
</body>
</html>
